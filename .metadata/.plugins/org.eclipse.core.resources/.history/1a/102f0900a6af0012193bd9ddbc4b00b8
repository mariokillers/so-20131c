/*
 ============================================================================
 Name        : Test.c
 Author      : 
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>
#include <Connections/Client.h>
#include <Connections/Server.h>
#include <Connections/Mensajes.h>
#include <collections/queue.h>

int main(void) {
	//INICIALIZO LA COLA DE MENSAJES
	t_queue* mensajesQueue;
	mensajesQueue = queue_create();
	int socketCliente;

	//INICIALIZO EL SERVIDOR EN EL PUERTO 5000
	initServer(5000);

	//INICIALIZO EL CLIENTE EN EL SOCKETCLIENTE
	socketCliente = connectServer("localhost",5000);

	if(mensajes(mensajesQueue)){
				Mensaje* miMensaje;

				miMensaje = queue_pop(mensajesQueue);
				char*msg = (char*) miMensaje->data;
				printf("%s",msg);
				fflush(stdout);
				//printf("Mensaje Recibido: %c", miMensaje->type);
				free(miMensaje->data);
				free(miMensaje);
	}

	return EXIT_SUCCESS;
}
